{{ template "base" .}}

{{ define "content" }}

<div class="container">
    <div class="row">
        <div class="col">
            <h1 class="mt-4">Design Patterns in Go</h1>
            <hr>
            <h3>Factory</h3>
            <div>
                <a href="javascript:void(0);" id="dog-factory-btn" class="btn btn-outline-secondary">
                    Get a dog from factory
                </a>
                <a href="javascript:void(0);" id="cat-factory-btn" class="btn btn-outline-secondary">
                    Cat a dog from factory
                </a>
            </div>
            <div class="mt-2" style="outline: 1px solid silver; padding: 2em;">
                <pre id ="dog-factory-output">
                    <span class="text-muted">NMothing received yet...</span>
                </pre>
            </div>
        </div>
    </div>
</div>

{{end}}

{{ define "js"}}
<script>
    const docFactoryButton = document.getElementById("dog-factory-btn");
    const catFactoryButton = document.getElementById("cat-factory-btn");
    const dogFactoryOutput = document.getElementById("dog-factory-output");

    document.addEventListener("DOMContentLoaded", function() {
        docFactoryButton.addEventListener("click", function() {
            fetch("/api/dog-from-factory", {method: 'get'})
                .then(res => res.json())
                .then(data => {
                    if (data.error) {
                        dogFactoryOutput.innerHTML = data.error;
                    } else {
                        dogFactoryOutput.innerHTML = JSON.stringify(data, null, 4);
                    }
                })
        });

        catFactoryButton.addEventListener("click", function() {
            fetch("/api/cat-from-factory", {method: 'get'})
                .then(res => res.json())
                .then(data => {
                    if (data.error) {
                        dogFactoryOutput.innerHTML = data.error;
                    } else {
                        dogFactoryOutput.innerHTML = JSON.stringify(data, null, 4);
                    }
                })
        })
    });
</script>
{{end}}